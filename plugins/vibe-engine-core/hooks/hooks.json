{
  "description": "Vibe Engine Core lifecycle hooks - 提供會話初始化、請求分類、權限控制、結果記錄、完成檢查、狀態保存",
  "hooks": {
    "SessionStart": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/session-init.js\"",
            "timeout": 10
          }
        ],
        "description": "初始化 Vibe Engine 運行時環境"
      }
    ],
    "UserPromptSubmit": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/prompt-classifier.js\"",
            "timeout": 5
          },
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/task-decomposition-engine.js\"",
            "timeout": 10
          },
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/agent-router.js\"",
            "timeout": 5
          }
        ],
        "description": "分類用戶請求、生成任務分解、產生路由計劃"
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Edit|Write|Bash|NotebookEdit|EnterPlanMode",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/routing-enforcer.js\"",
            "timeout": 5
          },
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/permission-guard.js\"",
            "timeout": 5
          },
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/budget-tracker-engine.js\"",
            "timeout": 5
          }
        ],
        "description": "強制路由委派（含 EnterPlanMode 攔截）、檢查危險操作權限和預算"
      },
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/task-tool-validator.js\"",
            "timeout": 5
          }
        ],
        "description": "驗證 Task tool 的 agent type 符合路由計劃"
      }
    ],
    "PostToolUse": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/routing-progress-tracker.js\"",
            "timeout": 3
          },
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/result-logger.js\"",
            "timeout": 3
          },
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/budget-tracker-engine.js\"",
            "timeout": 5
          }
        ],
        "description": "追蹤任務進度、記錄工具執行結果並更新預算"
      }
    ],
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/routing-completion-validator.js\"",
            "timeout": 10
          },
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/completion-check.js\"",
            "timeout": 10
          },
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/verification-engine.js\"",
            "timeout": 120
          },
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/auto-progress.js\"",
            "timeout": 30
          }
        ],
        "description": "驗證任務完成、執行自動化驗證、更新進度文檔"
      }
    ],
    "PreCompact": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/state-saver.js\"",
            "timeout": 15
          }
        ],
        "description": "在 context compaction 前保存關鍵狀態"
      }
    ]
  }
}
